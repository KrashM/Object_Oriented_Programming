# Инструкции за използване на CMake
## (за Windows и Visual Studio Code)

### Инсталиране на CMake
Изтеглете Cmake от [тук](https://cmake.org/download/). Най-вероятно ще се нуждате от **Windows x64 Installer**. При инсталацията изберете опцията за добавяне на CMake към environment variable-a *$PATH*. 

За да проверите дали имате инсталиран успешно CMake на вашата машина, отворете `Command Prompt` и изпълнете командата `cmake --version`

### Добавяне на необходимите extensions във Visual Studio Code
Необходими са ви следните extensions:
 - CMake
 - CMake Tools

Това са първите два extension-a, като напишете `cmake` в търсачката, и двете имат около 19,000,000 сваляния

### Създаване на CMake проект във Visual Studio Code
Когато вече имате всичко инталирано, вече може да конфигурирате вашия проект със CMake. За целта трябва на първо място да сте отворили папката на вашия проект, съдържаща само и единствено вашите `.cpp` и `.h/hpp` файловете. Следващите стъпки са:
 1. Натискате `Ctrl + Shift + P`
 2. Пишете `CMake` и избирате `CMake: Quick start`
 3. Избирате компилатора, на който искате да компилирате вашия проект
 4. Ако ви излезе едно поленце, на което пише `No CMakeLists.txt found`, просто натиснете `Esc`
 5. Пишете име на вашия проект, примерно `Homework02`, `FinalProject`, `LibratyDataBase` и т.н.
 6. Избирате `Add executable`

Ако всичко е наред, би трябвало да са се появили:
 - Папка `build`
 - Файл `CMakeLists.txt`
 - Ако сте нямали, файл `main.cpp`

### Какво да пишем в `CMakeLists.txt`?
За да конфигурирате правилно вашия проект, трябва да добавите всичките си `.cpp` файлове в `add_executable` командата

Пример: `add_executable(FinalProject main.cpp file01.cpp file02.cpp file03.cpp)`

Когато сте направили това, сте готови да използвате вашия проект. В лентата най-долу би трябвало да са се появили "триъгълниче" и "буболечка".
 - Чрез "триъгълничето" можете директно да пуснете вашия проект, компилирайки всичките файлове, посочени в `add_executable`
 - При поставяне на breakpoint, чрез "буболечката" можете директно да пуснете дебъгер

> Забележка: Възможен проблем, заради който не ви работи конфигурацията със `CMake`, е фактът, че в пътя до текущата папка имате поне една папка, кръстена на кирилица. Преименувайте папките си на латиница и избягвайте да поставяте празни позиции в техните имена, така би трябвало да се оправи.

### Малко по-сложна конфигурация
В някои случаи бихте искали да имаме и по-сложна `CMake` конфигурация, например бихме искали да имаме два executable файла - един за основното приложение и един за unit тестове. Нищо не ви пречи да имате повече от една `add_executable` команда.

Пример:
```cmake
add_executable(FinalProject main.cpp file01.cpp file02.cpp file03.cpp)
add_executable(UnitTests tests01.cpp tests02.cpp tests03.cpp file01.cpp file02.cpp file03.cpp)
```

Както виждате, имаме 3 общи файла при създаването на двата executable файла. Докато това не е тооолкова голям проблем за 3 файла, в общия случай може да имате 10+ общи файла при сформирането на няколко executable файла. За да избегнете това, може да създадете т.нар. "библиотека", в която да съхраните тези общи файлове. Трябва да изберете име на вашата библиотека и след това да изброите файловете, които принадлежат на нея.

Пример: `add_library(FinalProject file01.cpp file02.cpp file03.cpp)`

След това трябва да "свържем" нашата библиотека с executable-ите, които имат нужда от нея, по следния начин:

```cmake
add_executable(ConsoleApp main.cpp)
target_link_libraries(ConsoleApp FinalProject)

add_executable(UnitTests tests01.cpp tests02.cpp tests03.cpp)
target_link_libraries(UnitTests FinalProject)
```

По този начин осъществихме "свъзване" на executable файловете `ConsoleApp` и `UnitTests` с библиотеката `FinalProject`. Както забелязвате, вече не е необходимо да пишем файловете от библиотеката в командите `add_executable`.

Когато имате повече от един executable файл, в лентата долу точно до "буболечката" и "триъгълничето" можете да избирате точно кой executable искате да пуснете (`ConsoleApp` или `UnitTests`).

### Пример
Качен е примерен проект с примерен `CMakeLists.txt` файл - много подобна задача на Домашно 1. Ако свалите проекта локално и го отворите във Visual Studio Code, при натискане на `Ctrl + Shift + P` и `CMake: Quick start` и избор на компилатор, би трябвало да ви се конфигурира проекта локално при вас, като ще имате възможност, както да го стартирате, така и да пускате unit тестовете.
> Забележка: Проектът е писан преди 2 години и е възможно да има писани глупости в него :Д
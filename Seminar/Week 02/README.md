<h1>Потоци и Файлове (част 1). Текстови файлове.</h1>

Видове потоци:
- Потоци за вход (istream).
- Потоци за изход (ostream).

![enter image description here](https://i.ibb.co/VDdDSnM/potoci.gif)


<h3>Пример за работа с вход от конзолата - cin(обект от тип istream).</h3>

```c++
#include <iostream>

int main()
{
	int a, b;
	std::cin >> a >> b;
}
```

<h3>Пример за работа с поток за изход - cout(обект от тип ostream).</h3>

```c++
#include <iostream>

int main()
{
	int a = 10;
	int b = 12;
	int c = a + b;

	std::cout << a << " + " << b << " = " << c << std::endl;
}
```
	
<h3>Работа с поток за вход от файл(ifstream)</h3>

Пример за четене от файл!

```c++
#include <iostream>
#include <fstream>

int main()
{
	std::ifstream file("myFile.txt"); // Трябва да съществува такъв файл!!!

	if (!file.is_open())
	{
		std::cout << "Error!" << std::endl;
		return -1;
	}
	int a, b;

	file >> a >> b;

	file.close();
}
```

Пример за прочитане на цялото съдържание файл:

```c++
#include <iostream>
#include <fstream>

const int BUFF_SIZE = 1024;
int main()
{
	std::ifstream file("myFile.txt");

	if (!file.is_open())
	{
		std::cout << "Error!" << std::endl;
		return -1;
	}
	while (!file.eof())
	{
		char buff[BUFF_SIZE];
		file.getline(buff, BUFF_SIZE);
		
		//do something with the line
		std::cout << buff << std::endl;
	}
	file.close();
}
```

<h3>Работа с поток за изход към файл(ofstream)</h3>
   
```c++
#include <iostream>
#include <fstream>

int main()
{
	std::ofstream file("myFile.txt");

	if (!file.is_open())
	{
		std::cout << "Error!" << std::endl;
		return -1;
	}
	int a = 3;
	int b = 10;

	file << a << " " << b << " " << a + b << std::endl;
	
	if(!file.eof()) //check if the file has ended
		std::cout << "The file contains more data after the two integers!" << std::endl;

	file.close();
}
```

- ifstream или istream - get указател, който реферира елемента, който ще се прочете при следващата входна операция. 
- ofstream или ostream - put указател, който реферира мястото, където ще се запише следващият елемент.

<h3>Режими на работа</h3>

```c++
ifstream str("file.txt", <режим на работа>);
```
Режимът на работа е цяло число. 

| ios         | Ефект:                                                                                                                           |    |
|-------------|----------------------------------------------------------------------------------------------------------------------------------|----|
| ios::in     | Отваря файл за извличане.                                                                                                        | 1  |
| ios::out    | Отваряне на файл за вмъкване. Допуска се вмъкване на произволни места във файла. Ако файлът съществува, съдържанието се изтрива. | 2  |
| ios::ate    | Отваря за вмъкване и установява указателя put в края на файла. Допуска вмъкване на произволни места.                             | 4  |
| ios::app    | Отваря за вмъкване и установява указателя put в края на файла                                                                    | 8  |
| ios::trunc  | Ако файлът съществува, съдържанието се изтрива.                                                                                  | 16 |
| ios::binary | Превключва режима от текстов в двоичен                                                                                           | 32 |

```c++
ofstream file("file.txt", ios::out | ios::app);
```

<h3>Позициониране във файл</h3>

- tellg() - Връща позицития на текущия символ в **потока за четене**
- tellp() - Връща позицития на текущия символ в **потока за писане**
- seekg(offset, direction) - Премества get-указателят на позцития на **потока за четене**.
- seekg(streampos idx) - Премества get-указателят на позция idx на **потока за четене**.
- seekp(offset, direction) - Премества put-указателят на позцития на **потока за писане**.
- seekp(streampos idx) - Премества put-указателят на позция idx на **потока за писане**.

-**offset**: целочислена стойност. Отместването от direction.
-**direction**: Може да заема следите стойностти:

1. ios::beg - началото на файла.
2. ios::cur - текущата позиция във файла.
3. ios::end - края на файла.

<h3>Домашно</h3>

**Задача 1:** Напишете програма, която отпечатва собствения си код.

**Задача 2:** Напишете функция, която приема име на съществуващ файл и име и копира съдържанието на същестуващия файл в нов файл.

**Задача 3:** Да се напише функция, която намира големината на файл.

**Задача 4:** Да се напише функция, която заменя всяко срещане на символ във файл с друг символ. Съдържанието на файла не трябва да се зарежда в паметта.

**Задача 5**: Напишете програма,  която чете comma-separated values (**CSV**) файл със студенти **със следните 4 полета**: Първо име, Фамилно име, Имейл, Факултетен номер.
1. Със стартирането на програмата потребителят да въвежда име на файл, който да бъде зареден в паметта.
2. Напишете функция, която след зареждане на файла да отпечатва на **стандартния изход** информация за студента при подаден **факултетен номер**.
3. Напишете функция, която **по подаден факултетен номер и низ**, променя email-a на студента, който има дадения факултетен номер, с подадения низ.
4. Напишете функцията , която приема низ (име на файл) и запазва студентите в същия формат (**CSV**). Т.е. при повторно пускане на програмата да може да прочете новия генериран файл.

Да се реализира прост интерфейс, с който да се извикват написаните фунцкии през конзолата:

**Пример:**

```
Open file: 
>students.csv
File successfully opened!
>print 80000
Name = Stefan Velkov, Email: stefan@yahoo.com, FN: 80000
>edit 80000 stecho@abv.bg
>print 80000
Name = Krum Velkov, Email: stecho@abv.bg, FN: 80000
>save students2.csv
file students2.csv successfully saved!
```